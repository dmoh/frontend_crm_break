<div style="width: 100%; height: 100%;">
  <mat-drawer-container>
    <mat-drawer
        [(opened)]="opened"
        mode="drawerMode"
        [position]="'end'"
        [disableClose]="false">
      <app-details></app-details>
    </mat-drawer>

    <mat-drawer-content>
      <div style="display: flex; justify-content: space-between;border-bottom: solid 1px black;">
        <div>
          <h1>Tasks</h1>
          <p> Vous avez 4 taches restante(s)</p>
        </div>
        <div class="mt-4 mr-10 sm:mt-0">
          <!-- Add section button -->
          <!--<button
              mat-flat-button
              [color]="'accent'"
              (click)='opened=!opened'
              matTooltip="'Shortcut: Ctrl + .'">
              <mat-icon>add</mat-icon>
              <span class="ml-2 mr-1">Add Section</span>
          </button>-->
          <!-- Add task button -->
          <button
              class="ml-3"
              mat-raised-button
              [color]="'accent'"
              (click)='opened=!opened'
              matTooltip="'Shortcut: Ctrl + /'">
              <mat-icon>add</mat-icon>
              <span class="ml-2 mr-1">Add Task</span>
          </button>
        </div>

      </div>

    <!--<div style="width: 100%; margin-top: 50px;">

      <ul class='list-group'>
        <li class='list-group-item' *ngFor="let task of tasks, let i = index">
          {{task.title}}
        </li>
      </ul>

    </div>-->
    <div class="container" style="width: 100%; margin-top: 50px; border-top: solid 1 px black; margin-bottom: 15px;" >
      <mat-expansion-panel *ngFor="let task of tasks, let i = index" style="margin-bottom: 5px;">
        <mat-expansion-panel-header>

          <mat-panel-title>
            {{task.title}}
          </mat-panel-title>
          <mat-panel-description style="display: flex; justify-content: space-around;">
            <p style="color: #3F51B5;"> {{task.date}} </p>
            <p style="color: #EF5350;"> Priority : {{task.priority}} </p>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <p> {{task.notes}} </p>

        <mat-action-row>
          <button class="pr-4 pl-3.5" mat-stroked-button (click)='onChangeStatus(i)' *ngIf="!task.completed">

              <mat-icon color="hint">check_circle_outline</mat-icon>
              <span class="ml-2 font-semibold">MARK AS INCOMPLETE</span>

          </button>
          <button class="pr-4 pl-3.5" mat-stroked-button color='primary' (click)='onChangeStatus(i)' *ngIf="task.completed">

              <mat-icon (click)='onChangeStatus(i)' *ngIf="task.completed"
              class="text-primary">check_circle_outline</mat-icon>
              <span class="ml-2 font-semibold">MARK AS COMPLETE</span>

          </button>
          <button mat-raised-button style="margin-right: 7px;">Edit</button>
          <button mat-raised-button color='warn' style="margin-right: 7px;" (click)='deleteTask(task.id)'>delete</button>

        </mat-action-row>
        </mat-expansion-panel>
      <!--<mat-list *ngFor="let task of tasks, let i = index" style="display: flex;">
        <mat-list-item>
          <mat-icon  style="margin-right: 15px;" (click)='onChangeStatus(i)' *ngIf="!task.completed">
            <mat-icon color="hint">check_circle_outline</mat-icon>
          </mat-icon>
          <mat-icon  style="margin-right: 15px;" (click)='onChangeStatus(i)' *ngIf="task.completed">
            <mat-icon class="text-primary">check_circle_outline</mat-icon>
          </mat-icon>
           {{task.title}}</mat-list-item>
          <mat-icon style="margin-right: 30px;" (click)='deleteTask(task.id)' >delete</mat-icon>
          <mat-icon>edit</mat-icon>

      </mat-list>-->
    </div>
    </mat-drawer-content>
  </mat-drawer-container>
</div>


