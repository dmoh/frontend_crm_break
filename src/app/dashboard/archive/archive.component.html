<section class="w-100 overflow-hidden">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <mat-tab-group (selectedTabChange)="onChangeTab($event)" mat-align-tabs="center">
          <mat-tab label="Rappels">
            <ng-template matTabContent>
              <h5 style="font-size: 1rem">Liste des derniers rappels</h5>
              <div>
                <table
                  matSort
                  style="width: 100%"
                  mat-table
                  [dataSource]="dataSource"
                  class="mat-elevation-z8"
                >
                  <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Id/rèf
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.id}}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Date (création)
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.createdAtStr }}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="remindDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Date du rappel
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.remindAtStr }}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="subject">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Title
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.subject }}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="message">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Message
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.message }}
                    </td>
                  </ng-container>
                  <!--<ng-container matColumnDef="collaborator">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Collaborateur
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.collaboratorName }}
                    </td>
                  </ng-container>-->
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumns"
                  ></tr>
                </table>
              </div>
            </ng-template>
          </mat-tab>
          <mat-tab label="Offres">
            <ng-template matTabContent>
              <h5 style="font-size: 1rem">Archives/Ventes</h5>
              <div *ngIf="showSpinnerOffer" class="d-flex justify-content-center align-items-center">
                <mat-spinner [diameter]="20"></mat-spinner>
              </div>
              <div>
                <table
                  matSort
                  style="width: 100%"
                  mat-table
                  [dataSource]="dataSource"
                  class="mat-elevation-z8"
                >
                  <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Id/rèf
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.id }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Date (création)
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.createdAtStr }}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="collaborator">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Collaborateur
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.collaborator }}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="title">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Titre
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.title }}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="sellingPrice">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Prix proposé
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.sellingPropositionPrice }}CHF
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="property">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Propriété (id)
                    </th>
                    <td mat-cell *matCellDef="let data">
                      <div *ngIf="data.property && data.property.id else noproperty">
                        <div>
                          {{ data.property.id }}
                        </div>
                      </div>
                      <ng-template #noproperty>
                        --
                      </ng-template>
                     <!-- {{ data.property.address.city }}
                      {{ data.property.address.zipcode }}
                      {{ data.property.address.canton }}-->

                    </td>
                  </ng-container>
                  <!--<ng-container matColumnDef="collaborator">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      Collaborateur
                    </th>
                    <td mat-cell *matCellDef="let data">
                      {{ data.collaboratorName }}
                    </td>
                  </ng-container>-->
                  <tr mat-header-row *matHeaderRowDef="displayedColumnsOffers"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumnsOffers"
                  ></tr>
                </table>
              </div>
            </ng-template>
          </mat-tab>
          <mat-tab label="Prospects"> Content 3 </mat-tab>
        </mat-tab-group>
      </div>
    </div>
  </div>
</section>
